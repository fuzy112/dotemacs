2025-09-17  Zhengyi Fu  <i@fuzy.me>

	Really fix `+gnus-read-ephemeral-emacs-search-group'

	* init.el (+gnus-read-ephemeral-emacs-search-group): Require
	`gnus-group'.

2025-09-17  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/telega-config.el (telega): set default-directory to ~/.

2025-09-17  Zhengyi Fu  <i@fuzy.me>

	Improve gptel-tools user rejection message clarity

	* site-lisp/gptel-tools.el (gptel-tools--ediff-file-with-buffer):
	Update the tool results for rejected changes to provide clearer
	feedback when users reject proposed changes.  The message now
	clearly states that changes were not applied and provides better
	formatting for user-requested modifications.

2025-09-17  Zhengyi Fu  <i@fuzy.me>

	Improve help-fns-function-source-code robustness

	* init.el (help-fns-function-source-code): Rewrite function to use
	condition-case to ignore errors.  Preserve buffer and point
	positions during source code extraction.

2025-09-16  Zhengyi Fu  <i@fuzy.me>

	Fix +gnus-read-ephemeral-emacs-search-group

	* init.el (+gnus-read-ephemeral-emacs-search-group): Require `mml' and `mm-url'.
	(url-http-response-status): Declare the variable.

2025-09-16  Zhengyi Fu  <i@fuzy.me>

	Unify error handling in gptel-tools.el

	* site-lisp/gptel-tools.el (gptel-tools--write-file-async)
	(gptel-tools--insert-async, gptel-tools--grep-async)
	(gptel-tools--url-retrieve, gptel-tools--read-url-async)
	(gptel-tools--search-web-async)
	(gptel-tools--search-jira-issues-async)
	(gptel-tools--get-jira-issue-async): Unify error handling.

2025-09-16  Zhengyi Fu  <i@fuzy.me>

	Enable semantic highlighting of Elisp

	* packages.el: New package `semel'.
	* init.el: Enable it.

2025-09-16  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/dotemacs-core.el (with-no-compile!): Add indentation
	declaration.

2025-09-16  Zhengyi Fu  <i@fuzy.me>

	* init.el: Bind "M-g r" to `consult-grep-match'.

2025-09-15  Zhengyi Fu  <i@fuzy.me>

	Pre-build binaries for rime, pdf-tools and telega

	* init.el: Remove auto-build logic for pdf-tools.
	* packages.el: Update recipe for rime, pdf-tools and telega.
	* site-lisp/telega-config.el (telega-server-command): Set to the
	prebuilt telega server to binary.

2025-09-15  Zhengyi Fu  <i@fuzy.me>

	* init.el: Fix nerd-icons support in debview-mode.

2025-09-15  Zhengyi Fu  <i@fuzy.me>

	Add timeout to web-based tools

	* site-lisp/gptel-tools.el (gptel-tools--url-retrieve): Add new
	optional arg `timeout'.
	(gptel-tools--read-url-async, gptel-tools--search-web-async)
	(gptel-tools--search-jira-issues-async)
	(gptel-tools--get-jira-issue-async): Use it.

2025-09-15  Zhengyi Fu  <i@fuzy.me>

	* init.el (message-mail-alias-type): Set to `ecomplete'.

2025-09-15  Zhengyi Fu  <i@fuzy.me>

	Update transient levels

	* transient/levels.el (magit-merge): Add set level of
	--strategy-option to 1.

2025-09-12  Zhengyi Fu  <i@fuzy.me>

	* init.el (+gnus-read-ephemeral-emacs-search-group): New command.

2025-09-12  Zhengyi Fu  <i@fuzy.me>

	Fix file path handling in gptel-tools

	* site-lisp/gptel-tools.el: Ensure all file operations use
	expanded file names for consistent path handling.
	(gptel-tools--read-file): Use expand-file-name on filepath.
	(gptel-tools--list-directory): Use expand-file-name on directory.
	(gptel-tools--create-file): Use expand-file-name on path.
	(gptel-tools--write-file-async): Use expand-file-name on file-path.
	(gptel-tools--insert-async): Use expand-file-name on file-path.
	(gptel-tools--string-replace-async): Use expand-file-name on file-path.
	(gptel-tools--grep-async): Use expand-file-name on working-dir and default-directory.
	(gptel-tools--shell-command-async): Use expand-file-name on working-dir and default-directory.
	(gptel-tools--editor-diagnostics): Use expand-file-name on file-path.
	Also fix parameter names to match tool definitions.


2025-09-12  Zhengyi Fu  <i@fuzy.me>

	Simplify eshell configuration

	* init.el: Disable eshell visual commands and remove
	`eat-eshell-visual-command-mode' hook.

2025-09-12  Zhengyi Fu  <i@fuzy.me>

	Update gptel-tools

	* site-lisp/gptel-config.el: Remove JIRA tools.

	* site-lisp/gptel-tools.el (gptel-tools--ediff-buffers): Update docstring.
	(gptel-tools--url-retrieve): New helper function.
	(gptel-tools--read-url-async, gptel-tools--search-web-async): Use it.
	(gptel-tools-jira-host): New variable.
	(gptel-tools--get-jira-token, gptel-tools--search-jira-issues-async)
	(gptel-tools--get-jira-issue-async): New functions.
	("search_jira_issues", "get_jira_issue"): New gptel tools.

2025-09-12  Zhengyi Fu  <i@fuzy.me>

	Fix error when launching telega while in a tramp dir

	* site-lisp/telega-config.el (telega): Add advice to let-bind
	`default-directory' to `telega-cache-dir'.

2025-09-12  Zhengyi Fu  <i@fuzy.me>

	* early-init.el: Call `igc-start-idle-timer' on startup.

2025-09-12  Zhengyi Fu  <i@fuzy.me>

	Update gptel-tools documentation and fix function naming

	* site-lisp/gptel-tools.el: Simplify commentary section to be more
	concise and focused on file operations.
	(gptel-tools--popup-1): Rename from gptel-tools---popup-1 to follow
	proper naming convention with double dash for private functions.
	(gptel-tools--popup): Update macro to use renamed function.
	(gptel-tools--ediff-file-with-buffer): Fix function reference in
	quit function to use renamed popup function.
	Various functions: Update docstrings to be more concise and remove
	redundant information while maintaining clarity.
	(gptel-tools--shell-command-async): Improve command output formatting
	by including working directory in prompt.
	(gptel-tools--search-web-async): Fix HTTP error message capitalization.

	* site-lisp/gptel-config.el: Update rule 4 to specify sequential tool
	execution instead of parallel batching.

2025-09-11  Zhengyi Fu  <i@fuzy.me>

	Add shell command security features to gptel-tools

	* site-lisp/gptel-tools.el (gptel-tools--shell-command-allowed-p):
	New function to validate allowed shell commands and subcommands.
	(gptel-tools--shell-command-confirm-p): New function to determine
	when shell command execution requires confirmation.
	(gptel-tools--read-file-confirm-p): New function to determine when
	file reading requires confirmation.
	(read_file): Add confirmation requirement for files outside
	project directory.
	(run_command): Replace simple boolean confirmation with smart
	confirmation function based on command and working directory.

2025-09-11  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-tools.el: Fix documentation and improve file
	reading functions

	Fix function name reference in docstring from `gptel-tools--popup'
	to `gptel-tools--popup-1'

	Add documentation reference to `gptel-tools--popup-1' in
	`gptel-tools--popup' macro docstring

	Simplify and clarify docstring for
	`gptel-tools--ediff-file-with-buffer'

	Improve `gptel-tools--read-file' to use `save-excursion' and add
	window check before highlighting region


2025-09-10  Zhengyi Fu  <i@fuzy.me>

	Update gptel configuration and tools

	* site-lisp/gptel-config.el: Remove search_emacs_mailing_list tool from
	presets as it has been removed.
	* site-lisp/gptel-tools.el: Clean up requires, fix seq usage, improve
	documentation, and add missing function declarations.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	Add gptel-tools require to gptel-config

	* site-lisp/gptel-config.el: Add require for gptel-tools to ensure
	proper loading of gptel tool functionality.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	Improve gptel-tools grep functionality

	* site-lisp/gptel-tools.el (gptel-tools--grep-async): Add --sort=modified
	to ripgrep command for better search results ordering.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	Update gptel configuration and tools

	* site-lisp/gptel-config.el: Add require for gptel-transient, remove
	gptel--known-tools reset, fix spacing in cost comments.
	* site-lisp/gptel-tools.el: Remove :include t from shell_command tool.


2025-09-10  Zhengyi Fu  <i@fuzy.me>

	Fix Symbolâ€™s value as variable is void: straight-x-buffer

	* init.el (+straight-update-and-review): Require straight-x.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	* init.el (straight-prefix-map): Bind "X" to
	`+straight-update-and-review'.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	Extract gptel tool definitions

	* site-lisp/gptel-config.el: Move somes tools to gptel-tools.el
	* site-lisp/gptel-tools.el: New file.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	* init.el (+straight-update-and-review): New command.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (gptel-menu): Add suffix "a"
	gptel-abort.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel--flymake-diag-to-json): Fix
	:end -> end.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el ("Moonshot"): Update model pricing.

2025-09-10  Zhengyi Fu  <i@fuzy.me>

	Improve consult integration with history and default support

	* init.el (+consult--read-file-name-function): Add history and
	default parameter support for better file selection experience.
	(+consult--read-buffer-function): Add history support for buffer
	selection.


2025-09-09  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-write-file-async)
	(+gptel-string-replace-async, +gptel-insert-async): Fix error
	handling in async file operations. Move condition-case outside of
	buffer creation to ensure proper cleanup. Add missing error
	handling for line number validation in insert tool. Ensure edit
	buffers are properly killed on errors.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	* init.el (completion-pcm-leading-wildcard): Set to t.

	This is a new option in Emacs 31.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Refactor gptel-config tool functions for better maintainability.

	* site-lisp/gptel-config.el (+gptel-read-file)
	(+gptel-list-directory, +gptel-create-file)
	(+gptel-editor-diagnostics, +gptel-echo-message)
	(+gptel-web-search, +gptel-get-pullreq, +gptel-shellcheck): New
	functions extracted from lambda expressions.
	(+gptel-string-replace-async): Add detailed documentation
	including error conditions. Improve error handling to show line
	numbers of duplicate occurrences.
	(+gptel-run-command-async): Enhance output formatting to exclude
	header and footer lines.  Extract all lambda functions into named
	functions with proper docstrings for better code organization and
	maintainability.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Improve gptel agent documentation and formatting consistency.

	* site-lisp/gptel-config.el: Simplify tool descriptions by removing
	redundant "full" from path parameter descriptions. Fix numbering
	inconsistency in commit analysis section. Improve code formatting
	consistency in preset definition. Remove redundant project root
	message insertion in agent startup.


2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Configure pcap-mode for .pcapng files with line highlighting.

	* init.el: Add auto-mode association for .pcapng files to use pcap-mode
	and enable hl-line-mode in pcap-mode for better visibility.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Refactor gptel file editing tools for better reliability and user experience.

	* site-lisp/gptel-config.el: Replace complex edit_file tool with simpler
	str_replace and insert tools.
	(+gptel-edit-file-async): Remove complex edit function.
	(+gptel-string-replace-async): New function for simple string replacement.
	(+gptel-insert-async): New function for inserting text at specific line.
	(str_replace): New tool for exact string replacement with simplified description.
	(insert): New tool for line-based insertion.
	Update coding-agent preset to use new tools.
	Fix read_file documentation to clarify that end parameter uses -1 for end of file.
	Simplify write_file description by removing redundant ediff interface details.


2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Refactor gptel tools with improved user interface and error handling.

	* site-lisp/gptel-config.el: Extract run_command to separate function
	(+gptel-run-command-async): New function to handle command execution.
	(+gptel--popup-1): New function for interactive popup menus with key
	description parsing.
	(+gptel--popup): New macro for creating popup menus with comprehensive
	docstring.
	(+gptel-ediff-file-with-buffer): Replace read-answer with custom popup
	interface for better user experience.
	(+gptel-with-url-retrieve): Improve error handling with nested
	condition-case.
	(edit_file): Rename parameter from file-path to file_path for consistency.
	(write_file): Rename parameter from file-path to file_path for consistency.
	(run_command): Use extracted function for better code organization.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Configure TRAMP connection profiles for remote shell access.

	* init.el: Add connection-local profile for remote-explicit-shell-file-name
	to ensure /bin/bash is used for SSH and SCP connections via TRAMP.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Improve gptel write_file tool with ediff interface and fix project-root warnings.

	* site-lisp/gptel-config.el: Add require for dom.
	(write_file): Update description to mention ediff interface and side-by-side
	comparison instead of simple preview.  Remove redundant user option descriptions.
	(+gptel-ediff-file-with-buffer): Fix session buffer detection to check for
	gptel-mode binding before using current-buffer.
	(+gptel-edit-file-async): Update docstring to use proper backticks for
	gptel-mode reference.
	(gptel-agent): Suppress warnings about obsolete project-roots function
	and use with-suppressed-warnings macro.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add pcap-mode.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Fix command buffer naming in gptel configuration.

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Fix
	command buffer name generation to handle cases where
	project-current returns nil.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Add write_file tool and refactor file editing functionality in
	gptel configuration.

	* site-lisp/gptel-config.el: Add require for flymake.
	(+gptel-write-file-async): New async tool function for writing
	files with user preview.
	(+gptel-ediff-buffers): New helper function for ediff sessions
	with proper cleanup.
	(+gptel-ediff-file-with-buffer): New helper function for file
	editing with user confirmation.
	(write_file): New gptel tool for writing files with preview and
	confirmation.
	(+gptel-edit-file-async): Refactor to use new ediff helper
	functions for better code organization.

2025-09-09  Zhengyi Fu  <i@fuzy.me>

	Replace README.org with comprehensive README.md documentation.

	* README.md: New comprehensive documentation file with detailed
	configuration overview, installation instructions, feature
	descriptions, keybindings, and usage guide.
	* README.org: Remove outdated minimal documentation file.

2025-09-08  Zhengyi Fu  <i@fuzy.me>

	Improve error handling and tool functionality in gptel configuration.

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Add proper error
	signal propagation after callback to ensure proper error handling.
	(grep): Fix error handling to return structured error information
	with internal error details. Use project-prefixed buffer names for
	better organization.
	(run_command): Use project-prefixed buffer names for command output
	buffers to avoid conflicts.
	(+gptel--flymake-diag-to-json): New function to convert flymake
	diagnostics to structured JSON format.
	(editor_diagnostics): Update to return structured JSON data instead
	of formatted strings.
	(forge--post-submit-errorback): Fix advice to handle unused arguments
	properly.
	(gptel-agent): Add global variables for backend and model
	configuration to allow customization.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Refactor.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	Update development guidelines for sentence spacing.

	* AGENTS.md: Add guideline to keep two spaces between full sentences
	for consistent formatting in documentation and comments.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	Fix compile warnings and improve gptel-agent session handling.

	* site-lisp/gptel-config.el (gptel-agent): Replace obsolete when-let
	with when-let* and remove unused guidelines variable to eliminate
	compiler warnings. Only apply preset settings when creating new
	buffer to avoid reconfiguring existing sessions.
	(grep): Fix buffer string extraction in callback to use correct
	function name and avoid properties.
	(coding-agent): Fix indentation in tools list.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	Rename kimi-agent preset to coding-agent for better backend compatibility.

	* site-lisp/gptel-config.el (kimi-agent): Rename preset to coding-agent
	and update description to be backend-agnostic since it works with
	multiple backends beyond just kimi-k2.
	(gptel-agent): Update references to use the new coding-agent preset name.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	Fix complete_todo function to properly handle todo items with priorities.

	* site-lisp/gptel-config.el (+gptel-mark-todo-done): Update regex to
	match todo items with optional priorities and fix replace-match to only
	change TODO to DONE while preserving the rest of the line.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	Use project.el's project-name API for better project identification.

	* site-lisp/gptel-config.el (gptel-agent): Use project-name function
	instead of manually extracting directory name for better project
	identification and reduced naming conflicts.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	Add autoload for gptel-agent function.

	* site-lisp/gptel-config.el (gptel-agent): Add autoload cookie.
	* init.el: Add autoload form for gptel-agent.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (gptel-agent): Use project specific
	gptel-agent buffer name.

2025-09-07  Zhengyi Fu  <i@fuzy.me>

	Improve +gptel-edit-file-async function and update error message.

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Improve window
	selection logic for ediff, update error message for user rejection,
	add proper buffer cleanup.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	Add require 'flymake to editor_diagnostics function.

	* site-lisp/gptel-config.el (editor_diagnostics): Add require
	statement to ensure flymake is loaded before use.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	Add editor_diagnostics tool to gptel tools and kimi-agent preset.

	* site-lisp/gptel-config.el (editor_diagnostics): New tool to get
	diagnostics from editor.
	(kimi-agent): Add editor_diagnostics to toolset.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	Update +gptel-edit-file-async and run_command example.

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Remove
	kill-buffer and window restoration code to prevent unwanted buffer
	closing and window changes.
	(run_command): Update example commit message format to remove
	generated with eca attribution lines.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* AGENTS.md: Tell the agent to start a new record if necessary.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Fix window restoration in
	+gptel-edit-file-async and improve comint integration.
	(+gptel-edit-file-async): Use window-main-window instead of
	frame-root-window for better compatibility.
	(run_command): Add comint-highlight-prompt face to command prompt
	and add command to input history.
	(gptel-agent): Replace manual guideline collection with
	gptel-agent--setup-context function that uses gptel-add-file
	to include AGENTS.md in the context.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add editorconfig and jsonrpc as built-in packages.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Add with-editor require statement.
	Ensure with-editor is properly loaded before using it in the
	run_command tool implementation.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Improve run_command tool output
	formatting.
	(run_command): Insert separator and display command before
	output to improve readability when multiple commands are run.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Add project-specific todo list management
	tools for gptel agents and update kimi-agent preset.
	(+gptel-get-project-todo-file): Get project-specific todo file path
	in .cache directory.
	(+gptel-ensure-todo-directory): Ensure .cache directory exists.
	(+gptel-read-todo-file): Read todos from project-specific file.
	(+gptel-add-todo-item): Add new todo item with metadata.
	(+gptel-mark-todo-done): Mark todo as DONE.
	(+gptel-search-todos): Search todos by pattern.
	(+gptel-list-active-todos): List active TODO items.
	(read_todos, add_todo, complete_todo, search_todos,
	list_active_todos): gptel tool definitions.
	(kimi-agent): Add todo management tools to toolset and update
	system message with todo list maintenance instructions for
	multi-step tasks.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Refine gptel-config.el tool definitions.
	(+gptel-edit-file-async): Remove :direct property.
	(echo_message): Remove :direct property.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Multiple improvements to gptel-agent and
	gptel-edit-file-async.
	(+gptel-edit-file-async): Add instruction to LLM about stopping if
	user rejects edits.
	(gptel-agent): Use pop-to-buffer instead of display-buffer to select
	the window of the session buffer. Restructure guideline collection
	logic and add AGENTS.md to project guideline files.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (gptel-agent): Fix project guidelines
	not being properly inserted into session buffer. Guidelines are now
	collected and appended to the system message instead of being
	inserted directly into the buffer.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (read_file, grep, run_command): Enhance
	tool descriptions with detailed usage guidelines and examples.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Add forward
	declaration for ediff-window-setup-function to avoid byte-compiler
	warnings.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* init.el (clear-text-properties-in-region): New function to clear
	all text properties in the selected region using set-text-properties.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* AGENTS.md (Git and ChangeLog Conventions): Add guidance about
	mentioning new files in both ChangeLog and commit messages, and
	using git commit --amend when ChangeLog was missed initially.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Detect when
	running in a side window and switch to a proper window before
	starting ediff to avoid conflicts with ediff's window management
	requirements.

	* AGENTS.md: New file with project development guidelines and
	conventions.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (gptel-agent): Set
	gptel-include-tool-results to t locally.

2025-09-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (gptel-agent): New function.
	(kimi-agent): Update max-tokens to 8192, fix typo in system message.
	Add guidance about preferring dedicated tools over run_command.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-edit-file-async):
	Update docstring.  Update error handling.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (create_file): Prevent exiting files
	from being overwritten.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (run_command): Improve
	command output handling with persistent buffer, environment
	variables, and proper output capture from start marker.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (grep): Update rg arguments.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Properly
	abort the tool call when the user rejects the edit.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	Keep buffer in run_command tool instead of killing it

	* site-lisp/gptel-config.el (run_command): Remove kill-buffer call
	when command succeeds to keep the buffer open for user inspection.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	Fix ediff quit hook handling in gptel-edit-file-async

	* site-lisp/gptel-config.el (+gptel-edit-file-async): Replace
	'setq ediff-quit-hook' with 'add-hook' for proper hook
	management. Remove redundant run-at-time call for window
	configuration restoration. Simplify cleanup logic in ediff
	completion callback.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	Enhance grep tool with optional working directory parameter

	* site-lisp/gptel-config.el (grep): Add working_dir parameter for
	flexible directory searching. Update function signature and
	default-directory handling.
	(+gptel-edit-file-async): Improve error handling, use 'abort
	symbol instead of error lists. Add :direct t property to
	edit_file tool. Fix ediff cleanup hook to use run-at-time for
	proper window configuration restoration.
	(run_command): Improve command execution with comint-mode and
	proper working directory expansion. Add :direct t property to
	echo_message tool.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	gptel: asynchronous web searching and url retrieving

	* site-lisp/gptel-config.el (+gptel-with-url-retrieve): New macro.
	(read_url): Use it.
	(+gptel-search-ddg-async): New function.
	(search_web): Use it.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	Refactor gptel configuration

	* site-lisp/gptel-config.el (gptel--known-backends)
	(gptel--known-tools, gptel--known-presets): Reset to nil.
	(read_file): Add start and end.
	(grep): New tool.
	(+gptel-run-command-sandboxed): Remove function.
	(run_command): Now run asynchronously.
	(kimi-coder): Remove preset.
	(kimi-agent): Refactor.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	* init.el (ielm-history-file-name): Use zstd compression.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/ubuntu-source.el: New file.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	Fix font setting error in terminal

	* init.el <nerd-icons>: Only call `nerd-icons-set-font' when
	`(display-graphic-p)' is non nil.

2025-09-05  Zhengyi Fu  <i@fuzy.me>

	* init.el (+magit--ccdp-no-query): Use `bound-and-true-p'.

2025-09-04  Zhengyi Fu  <i@fuzy.me>

	* init.el: Fix configuration of p-search.

2025-09-04  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-edit-file-async): More robust
	error handling.

2025-09-04  Zhengyi Fu  <i@fuzy.me>

	Update gptel tools

	* site-lisp/gptel-config.el (+gptel-edit-file-async): New function.
	Replaced `+gptel-edit-file'.
	Reomoved `read_buffer' and `edit_buffer' tool.

2025-09-03  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/xiaoshuo.el: Change C-p/C-n to p/n.

2025-09-03  Zhengyi Fu  <i@fuzy.me>

	Fix tramp-cache configuration

	* init.el (tramp-persistency-file-name): Set to "tramp.eld".
	`tramp' reads the file with `insert-file-contents-literally', so
	`auto-compression-mode' is not supported.

2025-09-03  Zhengyi Fu  <i@fuzy.me>

	* init.el: Fix bootstrapping of pdf-tools.

2025-09-03  Zhengyi Fu  <i@fuzy.me>

	* init.el (help-window-keep-selected): Set to t.

2025-09-02  Zhengyi Fu  <i@fuzy.me>

	* init.el (ement-save-sessions): Set to t.

2025-09-02  Zhengyi Fu  <i@fuzy.me>

	* init.el (consult-mode-histories): Fix histories for
	`eca-chat-mode'.

2025-09-02  Zhengyi Fu  <i@fuzy.me>

	* init.el (+maybe-init-fontset): Demote errors to messages.

2025-09-02  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/check-hooks.el: New file.

2025-09-02  Zhengyi Fu  <i@fuzy.me>

	* init.el: Wrap some `add-hook' forms in `after-load!' to prevent
	the standard-value from being overwritten.

2025-09-02  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/xiaoshuo.el (xiaoshuo-mode-map): Define keys.

2025-09-02  Zhengyi Fu  <i@fuzy.me>

	Minor improvement in gnus-diff

	* site-lisp/gnus-diff.el: Require `gnus-art'.
	(gnus-treat-highlight-diffs): Change to a user option.

2025-09-01  Zhengyi Fu  <i@fuzy.me>

	* init.el: Use `require-theme' to load modus-themes.

2025-09-01  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Instead of adding entries to
	`straight-built-in-pseudo-packages', register those packages with
	`:type built-in'.

2025-09-01  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/xiaoshuo.el (xiaoshuo-mode): Set `mode-line-format' to nil.

2025-08-31  Zhengyi Fu  <i@fuzy.me>

	* init.el (+fontsets-initilize-hook): New variable.
	(+init-fontsets): Run `+fontset-initialize-hook'.

2025-08-31  Zhengyi Fu  <i@fuzy.me>

	Do not use default save files

	* init.el (recentf-save-file, save-place-file)
	(project-list-file, tramp-persistency-file-name, savehist-file):
	Remove fallback names for these files.  This prevent the default
	names of the files being used after running emacs -Q.

2025-08-31  Zhengyi Fu  <i@fuzy.me>

	Some minor updates

	* transient/values.el (gptel-menu): Add --color to
	magit-log:mode-log-mode.

	* site-lisp/gptel-config.el (kimi-assistant): Use `search_web'
	instead of the built-in `$websearch'.

	* packages.el (straight-built-in-pseudo-packages): Add `peg'.

	* init.el: Add `nerd-icons-set-font' to `server-after-make-frame-hook'.
	Configure `consult-mode-histories' for `eca-chat-mode'.
	(webjump-sites): Add "Kagi Assistant".
	(mode-specific-map): Bind "j" to `webjump'.

2025-08-29  Zhengyi Fu  <i@fuzy.me>

	Refactor xiaoshuo-mode

	* site-lisp/xiaoshuo.el (xiaoshuo-heading-regexp): Change to an
	user option.
	(xiaoshuo-content): Remove :family attribute.
	(xiaoshuo-fontset-name, xiaoshuo-ascii-font, xiaoshuo-cjk-font)
	(xiaoshuo-line-spacing): New user options.
	(xiaoshuo-mode): Apply user options.

2025-08-29  Zhengyi Fu  <i@fuzy.me>

	* init.el: Add ibuffer configuration.
	(ibuffer-saved-filter-groups): Update value.


2025-08-29  Zhengyi Fu  <i@fuzy.me>

	* init.el (+init-fontsets): Set nerd-icons fonts if nerd-icons is
	loaded.

2025-08-29  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add whisper.

2025-08-29  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add clojure-mode and inf-clojure.

2025-08-28  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add eca.

2025-08-26  Zhengyi Fu  <i@fuzy.me>

	Remove some eww configuration

	* init.el (eww+miniflux-trim, eww+kagi-trim)
	(eww-reset-current-bookmark): Remove functions.

2025-08-26  Zhengyi Fu  <i@fuzy.me>

	* packages.el (straight-built-in-pseudo-packages): Add `map'.

2025-08-26  Zhengyi Fu  <i@fuzy.me>

	* init.el: Change binding of `consult-history' from "C-c h" to
	"C-c H".

2025-08-26  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add ement.

2025-08-26  Zhengyi Fu  <i@fuzy.me>

	Optimizing startup speed

	* init.el (+init-fontsets): Set `use-default-font-for-symbols' to t.
	(+maybe-init-fontset): 	Ignore errors when initializing fonts.
	(nerd-icons): Set up nerd fonts.
	(buffer-list-update-hook): Do not add `recentf-track-opened-file'
	to `buffer-list-update-hook' on startup.

2025-08-26  Zhengyi Fu  <i@fuzy.me>

	* packages.el (straight-built-in-pseudo-packages): Add built-in packages.

2025-08-22  Zhengyi Fu  <i@fuzy.me>

	* init.el: Auto install `pdf-tools'.

2025-08-22  Zhengyi Fu  <i@fuzy.me>

	Do not use ehelp any more

	* init.el (help-window-select): Set to t.
	Unbind `ehelp-command'.

2025-08-22  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (deepseek-mathematician): New preset.

2025-08-22  Zhengyi Fu  <i@fuzy.me>

	* scripts/claude: Add support for DeepSeek V3.1.

2025-08-21  Zhengyi Fu  <i@fuzy.me>

	* init.el (+mail-to-help-gnu-emacs): Change binding to <help> H.

2025-08-21  Zhengyi Fu  <i@fuzy.me>

	Use C-h to delete char and adjust relevant settings

	* init.el (meow-setup): Remove ?h.
	Bind C-c h to <help>.
	(global-map): Bind C-M-h to M-DEL.

2025-08-21  Zhengyi Fu  <i@fuzy.me>

	* init.el (global-map): Bind C-h, <help> and <f1> to
	`ehelp-command'.

2025-08-21  Zhengyi Fu  <i@fuzy.me>

	* init.el: Do not unbind M-s in `paredit-mode-map'.

2025-08-21  Zhengyi Fu  <i@fuzy.me>

	* packages.el (systemd): Use default systemd recipe.

2025-08-20  Zhengyi Fu  <i@fuzy.me>

	Remove citre configurations.

	* packages.el:
	* init.el:

2025-08-20  Zhengyi Fu  <i@fuzy.me>

	* init.el: Do not add ws-butler-mode to find-file-hook any more.
	Add diff-mode to ws-butler-global-exempt-modes.

2025-08-19  Zhengyi Fu  <i@fuzy.me>

	* early-init.el (jka-compr-load-suffixes): Add ".zst".

2025-08-19  Zhengyi Fu  <i@fuzy.me>

	* init.el: Use `comint-osc-process-output'.
	(+handle-osc-8, +comint-handle-osc-8): Removed

2025-08-19  Zhengyi Fu  <i@fuzy.me>

	* init.el (+shellcheck-auto-fix): New command.

2025-08-19  Zhengyi Fu  <i@fuzy.me>

	* early-init.el: Do not call `straight-use-package' on `straight'
	explicitly.  Load packages.el without suffix.

2025-08-19  Zhengyi Fu  <i@fuzy.me>

	New macro `with-no-compile!'

	* site-lisp/dotemacs-core.el (with-no-compile!): New macro.
	* init.el: Use it.

2025-08-19  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui-recentf, tui-switch-project): Redirect
	error messages to stderr.

2025-08-18  Zhengyi Fu  <i@fuzy.me>

	* init.el (straight-prefix-map): Bind "U" to
	`+straight-review-updated-repos'.

2025-08-18  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/good-doc.el (good-doc--local-docs): Fix infinite loop.

2025-08-18  Zhengyi Fu  <i@fuzy.me>

	* init.el (quilt-list-files): New command.

2025-08-17  Zhengyi Fu  <i@fuzy.me>

	* early-init.el (custom-file): Change to custom.el.zst.

2025-08-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (tool-map): Bind "p" to `tui-switch-project'.

2025-08-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (recentf-save-file, save-place-file)
	(project-list-file, savehist-file): Use zstd to compress the
	files.

2025-08-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (dotemacs-theme-refresh): Force `tab-line-tab-current'
	and `tab-line-tab-inactive' to use white foreground when in dark
	background mode.

2025-08-16  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (gptel-backend, gptel-model): Set to
	use deepseek-chat.

2025-08-16  Zhengyi Fu  <i@fuzy.me>

	* packages.el (eat): Fork it.

2025-08-16  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui-switch-project): New command.
	(tui--project-callback): New function.

2025-08-16  Zhengyi Fu  <i@fuzy.me>

	* scripts/claude: Add --.

2025-08-16  Zhengyi Fu  <i@fuzy.me>

	* packages.el (ws-butler): Use lewang's GitHub repo instead of
	nongnu-elpa while nongnu-elpa is down.

2025-08-16  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/eshell-extras.el (eshell/rg): Disable heading so that
	`grep-mode' can parse the output.

2025-08-16  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui-rg): Add --no-heading to rg args.

2025-08-15  Zhengyi Fu  <i@fuzy.me>

	Update gptel-config.el

	* site-lisp/gptel-config.el ("Moonshot"): Update backend definition.
	($websearch): Change category to "internal".
	(kimi-agent): Change temperature to 0.2.  Update tools and system prompt.

2025-08-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (shellcheck): Fix handling of remote files.

2025-08-14  Zhengyi Fu  <i@fuzy.me>

	* init.el (ws-butler-convert-leading-tabs-or-spaces):  Set to nil.

2025-08-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-shellcheck-fix): Set
	`flymake-show-diagnostics-at-end-of-line' to `fancy'.

2025-08-14  Zhengyi Fu  <i@fuzy.me>

	* init.el: Remove `dotemacs-theme-refresh' from
	`after-make-frame-functions'.

2025-08-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui-foot-exec): Simplify code.

2025-08-14  Zhengyi Fu  <i@fuzy.me>

	Fix straight flymake integration

	* init.el (straight-flymake-byte-compile): Use bootstrap.el
	instead straight.el to avoid emacs-verions-changed error.  Use
	map-apply to convert package names from strings to symbols.
	(trusted-content): Add straight repo dir and build dir.

2025-08-14  Zhengyi Fu  <i@fuzy.me>

	* init.el (+import-env-var-for-display): Fix importing display name.

2025-08-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (kimi-assistant): Use kimi-k2-turbo-preview.

2025-08-13  Zhengyi Fu  <i@fuzy.me>

	* init.el (dotemacs): Define a theme.  Put my face customizations
	in a theme `dotemacs'.  Otherwise, the customizations will be
	written to `custom-file'.

2025-08-13  Zhengyi Fu  <i@fuzy.me>

	Implement elisp flymake backend for straight

	* init.el (straight-flymake-byte-compile): New function.  Advice
	`elisp-flymake-byte-compile' to load packages installed with
	`straight'.
	(straight--add-package-to-load-path): Remove advice.

2025-08-13  Zhengyi Fu  <i@fuzy.me>

	Auto-quit reviewing the repo only when the local branch equals the
	upstream branch

	* init.el (+straight-repo-up-to-date-p): Add optional arg to check
	if the local branch is strictly equal to the upstream branch.
	(+straight-review-updated-repos): Use it in `magit-pre-refresh-hook'.

2025-08-12  Zhengyi Fu  <i@fuzy.me>

	* early-init.el (native-comp-async-on-battery-power):
	Set to nil.

2025-08-12  Zhengyi Fu  <i@fuzy.me>

	* init.el (+straight-review-updated-repos): Switch to next repo
	when the current repo is up-to-date.
	(+straight-repo-up-to-date-p): New function.

2025-08-12  Zhengyi Fu  <i@fuzy.me>

	* early-init.el: Do not clear `site-run-file'.  It does not work
	since Emacs 31.

2025-08-12  Zhengyi Fu  <i@fuzy.me>

	* init.el (LaTeX-mode-hook, latex-mode-hook): Add
	`turn-on-reftex'.

2025-08-12  Zhengyi Fu  <i@fuzy.me>

	* init.el (emacs-startup-hook): Add
	`standard-display-unicode-special-glyphs'.

2025-08-12  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-shellcheck-fix):
	Do not include all "web" tools.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	TeX configuration

	* init.el (TeX-auto-save, TeX-parse-self): Set to t;
	(TeX-master): Set default value to t.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	* init.el (+straight-review-updated-repos): Fix the command used
	to check whether the branch is updated.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	* init.el (mode-specific-map): Bind "C-'" to `claude-code-ide-menu'.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	* init.el (+mail-to-help-gnu-emacs): New command.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	* early-init.el (undo-limit, undo-strong-limit): Increase undo limit.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	* init.el (+eglot-prefix-map): New keymap.  Bind to C-c l in
	`eglot-mode-map'.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	* init.el (toggle-map): Bind "e" to `eglot'.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui-run): Run `shell-file-name' if the
	command is not specified.
	(tui-locate): Display the preview window vertically.

2025-08-11  Zhengyi Fu  <i@fuzy.me>

	* init.el (+straight-review-updated-repos): Add
	`exit-recursive-edit' to `kill-buffer-hook'.

2025-08-10  Zhengyi Fu  <i@fuzy.me>

	* init.el (+straight-review-updated-repos): Customize header-line
	and mode-line.

2025-08-10  Zhengyi Fu  <i@fuzy.me>

	* init.el: Use `reposition-window' instead of `+recenter-top-30%'.

2025-08-10  Zhengyi Fu  <i@fuzy.me>

	* init.el: Update key bindings of eat.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	* init.el (org-latex-classes): Add ctexart.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	* init.el (+xref-window-quit): Use `quit-windows-on'.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	* init.el (+straight-review-updated-repos): Check packages before
	exiting.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	Fix tui.el compatibility with htop

	* site-lisp/tui/tui.el (tui-external-terminal-exec)
	(tui-foot-exec):
	* site-lisp/tui/tui-vterm.el (tui-vterm-exec):
	* site-lisp/tui/tui-term.el (tui-term-exec):
	* site-lisp/tui/tui-eat.el (tui-eat-exec): Allow the `callback'
	argument to be nil.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui-terminal-function): Add
	`tui-foot-exec' to choice candidates.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui-foot-window-size): Change default
	value of tui-foot-window-size.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	* init.el: Do not clear file-name-handler-alist during startup.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	Improve foot support of tui.el

	* site-lisp/tui/tui.el (tui-foot-file, tui-foot-appid)
	(tui-foot-window-size): New user options.
	(tui-foot-exec): New function.

2025-08-09  Zhengyi Fu  <i@fuzy.me>

	* init.el (+straight-review-updated-repos): New command.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	* init.el (claude-code-ide-cli-path): Set to scripts/claude.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Remove elfeed-web.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	* init.el (+dired-side): New command.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	* scripts/claude: New file.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	Remove escape key bindings from meow and set claude-code-ide backend

	* init.el: Remove escape key bindings from meow-normal-define-key and
	meow-motion-define-key.
	* init.el: Set claude-code-ide-terminal-backend to 'eat'.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	Add comprehensive side window management

	* init.el (+toggle-side-window): New function.  Generic function to
	toggle side windows with proper size restoration using window state
	persistence.
	(+toggle-side-window-left, +toggle-side-window-right,
	+toggle-side-window-above, +toggle-side-window-below): New commands.
	Specialized commands for toggling side windows on each side of the frame.
	(window-prefix-map): Update key bindings for side window toggles.
	(toggle-left-side-window): Remove function.  Replaced by new side window
	management system.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	* init.el: Add more key bindings for windows-x.el.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add claude-code-ide.el.

2025-08-08  Zhengyi Fu  <i@fuzy.me>

	* init.el: Do not start server automatically.

2025-08-07  Zhengyi Fu  <i@fuzy.me>

	Add OSC 8 support to comint

	* init.el (+handle-osc-8, +comint-handle-osc-8): New functions.

2025-08-07  Zhengyi Fu  <i@fuzy.me>

	* init.el (+custom-faces): Add some color to tab-line in dark
	mode.

2025-08-07  Zhengyi Fu  <i@fuzy.me>

	* init.el (+init-fontsets): Specify font for emoji.

2025-08-06  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-display-buffer): Ensure the show buffer is at
	the bottom.

2025-08-06  Zhengyi Fu  <i@fuzy.me>

	Prevent implied frame resize when switching themes

	* init.el (+inhibit-implied-resize): New function.
	(enable-theme, disable-theme): Adviced.

2025-08-06  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el ("Moonshot"): Add model
	"kimi-k2-turbo-preview".
	(deepseek-translator): Change temperature to 1.3
	(deepseek-assistant): New preset.
	(+gptel-shellcheck-fix): Use `ensure-list'.  Force use of tools.

	* site-lisp/treesit-config.el (treesit-language-source-alist):
	Update recipe for c and markdown.

	* init.el: Bind C-c R to `rg-menu'.
	(treesit): Load treesit-config.el.

2025-08-06  Zhengyi Fu  <i@fuzy.me>

	* init.el (+init-fontsets): Update font settings.

2025-08-05  Zhengyi Fu  <i@fuzy.me>

	* init.el (+init-fontsets): Simplify font settings.

2025-08-05  Zhengyi Fu  <i@fuzy.me>

	* init.el (+init-fontsets): Modify the default fontset.

2025-08-05  Zhengyi Fu  <i@fuzy.me>

	Update font setting

	* init.el (+custom-fonts-alist, +apply-font-setting)
	(+apply-custom-fonts, +custom-fontset)
	(+nerd-icons--after-make-frame-h): Remove.
	(+init-fontsets): New function.

2025-08-05  Zhengyi Fu  <i@fuzy.me>

	Add indicator to recursive minibuffer

	* init.el: Enable `minibuffer-depth-indicate-mode'.
	(+custom-faces): Customize `minibuffer-depth-indicator' face.
	(minibuffer-depth-indicator-function): Set to a lambda that
	returns unicode symbols.

2025-08-04  Zhengyi Fu  <i@fuzy.me>

	* init.el (+import-env-var-for-display): Use frame parameter
	DISPAY.

2025-08-04  Zhengyi Fu  <i@fuzy.me>

	Update elfeed configuration

	* init.el (elfeed-search-remain-on-entry): Set to t.
	(elfeed-show-entry-switch): Set to `+elfeed-display-buffer'.
	(+elfeed-display-buffer):
	(+elfeed-search-show-entry-pre): New function.
	(elfeed-show-next, elfeed-show-prev): Adviced.
	(elfeed-show-entry-delete): Set to lambda to kill buffer only in
	`elfeed-show-mode'.
	(+elfeed-scroll-up-command, +elfeed-scroll-down-command): New commands.
	(elfeed-search-mode-map): New bindings on n, p, M-RET.
	(elfeed-show-mode-map): New bindings SPC, S-SPC.

2025-08-04  Zhengyi Fu  <i@fuzy.me>

	Update font configuration

	* init.el (modus-themes-variable-pitch-ui): Set to nil.
	(+custom-faces): Modify `fixed-patch', `fixed-pitch-serif',
	`variable-pitch' and `header-line-inactive'.

2025-08-04  Zhengyi Fu  <i@fuzy.me>

	* init.el (+custom-faces): Customize `eat-term-font-0' to use
	IosevkaTerm.

2025-08-04  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/telega-config.el (telega-emoji-use-images): Set to false.

2025-08-03  Zhengyi Fu  <i@fuzy.me>

	Replace deadgrep with rg.el

	* init.el (mode-specific-map): Bind "r" to `rg-dwim'.
	* packages.el:

2025-08-03  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/pp-posframe.el (pp-posframe-display-value): Display
	right arrow instead of =>.

2025-08-02  Zhengyi Fu  <i@fuzy.me>

	* init.el (gptel): Load gptel-config.el.

2025-08-02  Zhengyi Fu  <i@fuzy.me>

	* init.el (+apply-font-setting): Rename arguments.
	(+custom-fonts-alist, +custom-fontset): Use bolder fonts.

2025-08-02  Zhengyi Fu  <i@fuzy.me>

	* init.el: Fix p-search info extension name.

2025-08-02  Zhengyi Fu  <i@fuzy.me>

	* init.el (+custom-faces): Set foreground of region and
	secondary-selection to unspecified.

2025-08-01  Zhengyi Fu  <i@fuzy.me>

	* init.el (consult-eglot-symbols): Hack highlight for
	`consult-eglot-symbols'.

2025-08-01  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Fix wrong parameter in presets:
	:system-message -> :system.

2025-08-01  Zhengyi Fu  <i@fuzy.me>

	Update key bindings

	* init.el: Bind "C-c s" to `search-map'.
	Bind "C-<mouse-1>" to `embark-dwim'.
	(embark-dwim@mouse): Handle mouse click.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	* init.el (straight-prefix-map): Bind more commands.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	Update modify-other-keys.el

	* site-lisp/modify-other-keys.el
	(modify-other-keys--setup-input-decode-map): Use angled symbol
	names for special whitespace keys.
	(modify-other-keys--translate-shifted-digits): New function.
	Translate shifted digits in `local-function-key-map'.
	(modify-other-keys--init): Call it.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/treesit-config.el (treesit-language-source-alist): Set
	revisions of c and markdown grammar to the versions of API 14.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	* init.el (webjump): Add yhetil.org.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/treesit-config.el: New file.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	* init.el (mode-specific-map): Remove duplicated `toggle-map'
	binding.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add gptel-aibo.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/telega-config.el: Hide telegram buffers from results
	of `consult-buffer'.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	Switch to motion state in `magit-blob-mode'

	* init.el (+meow-maybe-switch-to-motion): New function.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (kimi-coder): Update system message.

2025-07-31  Zhengyi Fu  <i@fuzy.me>

	Move packages I don't maintain to site-lisp/obsoletes

	* site-lisp/obsoletes/quick-init.el:
	* site-lisp/obsoletes/persp-mode-config.el:
	* site-lisp/obsoletes/outline2org.el:
	* site-lisp/obsoletes/linkding.el:
	* site-lisp/obsoletes/gtkdoc.el:
	* site-lisp/obsoletes/gpg-agent.el:
	* site-lisp/obsoletes/dynamic-highlight.el:
	* site-lisp/obsoletes/dch.el:
	* site-lisp/obsoletes/consult-omni-kagi.el:
	* site-lisp/obsoletes/activities-persist-buffers.el:

2025-07-30  Zhengyi Fu  <i@fuzy.me>

	* init.el (mode-specific-map): Bind "T" to `telega'.
	(tool-map): Bind "c" to `telega-chat-with'.

2025-07-30  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Remove the default ChatGPT backend.

2025-07-30  Zhengyi Fu  <i@fuzy.me>

	Set up load-path for flymake

	* init.el (straight--add-package-to-load-path): New advice.

2025-07-30  Zhengyi Fu  <i@fuzy.me>

	Add configuration for telega

	* site-lisp/telega-config.el: New file.
	* packages.el: Add telega.
	* init.el: Load configuration file for telega.

2025-07-30  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Add presets.

2025-07-30  Zhengyi Fu  <i@fuzy.me>

	* init.el (quilt-list-applied-patches): New command.

2025-07-30  Zhengyi Fu  <i@fuzy.me>

	Add configuration for Moonshot built-in web search tool

	* site-lisp/gptel-config.el ("Moonshot"): Add request_params for
	built-in web search tool.
	("$web_search): Add tool definition.

2025-07-29  Zhengyi Fu  <i@fuzy.me>

	* init.el (+custom-fonts-alist): Add Unifont and as fallback for
	Unicode characters.

2025-07-29  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/modify-other-keys.el (modify-other-keys--init): Remove
	unneeded logging message.

2025-07-28  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/modify-other-keys.el (modify-other-keys--init): Ignore
	initial_terminal and graphical displays.

2025-07-28  Zhengyi Fu  <i@fuzy.me>

	Fix diff-hl-margin

	* init.el (diff-hl-margin-symbols-alist): Fix invalid key name.
	(diff-hl-margin-ensure-visible): Override this function to set
	margin width automatically.

2025-07-28  Zhengyi Fu  <i@fuzy.me>

	* init.el (+custom-faces): Customize diff-hl-margin faces.

2025-07-28  Zhengyi Fu  <i@fuzy.me>

	* init.el (diff-hl-margin-symbols-alist): Use more Chinese
	characters.

2025-07-28  Zhengyi Fu  <i@fuzy.me>

	Diff-hl: Display Chinese characters in the margins

	* init.el (diff-hl-margin-symbols-alist): Set to use Chinese
	characters.
	(+diff-hl-enlarge-margin-width): New function.  Enlarge margin
	widths to accommodate Chinese characters.

2025-07-28  Zhengyi Fu  <i@fuzy.me>

	* init.el (toggle-map): Bind "t" to `consult-theme'.

2025-07-28  Zhengyi Fu  <i@fuzy.me>

	Fix modify-otehr-keys

	* site-lisp/modify-other-keys.el
	(modify-other-keys--setup-input-decode-map): New function.  Set up
	per-terminal input-decode-map.

2025-07-27  Zhengyi Fu  <i@fuzy.me>

	* init.el (embark-cycle-key): Set to "C-.".

2025-07-27  Zhengyi Fu  <i@fuzy.me>

	* init.el (copy-json-as-lisp): New command.

2025-07-25  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/modify-other-keys.el: Refactor.

2025-07-25  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/modify-other-keys.el: New file.

2025-07-25  Zhengyi Fu  <i@fuzy.me>

	* init.el (remote-eat): Remove connection local variables profile.
	(eat-exec@connection-local-vars): Remove advice.

2025-07-24  Zhengyi Fu  <i@fuzy.me>

	* early-init.el (kill-do-not-save-duplicates): Set to t.

2025-07-24  Zhengyi Fu  <i@fuzy.me>

	Configuration for Niri

	* init.el (+import-env-var-for-display): New function.  Add to
	`server-after-make-frame-hook'.
	(+niri-xdg-open): New function.  Set as default browser if Emacs
	is running in Niri session.

2025-07-24  Zhengyi Fu  <i@fuzy.me>

	* init.el (eat-tramp-shells): Configure shell for scpx method.

2025-07-24  Zhengyi Fu  <i@fuzy.me>

	Update gptel configuration

	* site-lisp/gptel-config.el (+gptel-auto-scroll-safe): Set
	`scroll-preserve-screen-position' locally to t.
	* init.el: Bind "C-j" to `gptel-send' in `gptel-mode-map'.
	Bind "C-j" to `gptel-aibo-send' in `gptel-aibo-mode-map'.
	Removed `olivetti-mode' from `gptel-mode-hook'.
	(toggle-map): Bind "C" to `olivetti-mode'.
2025-07-23  Zhengyi Fu  <i@fuzy.me>

	* init.el (+custom-fontset): Only update the faces when
	window-system is non-nil.

2025-07-22  Zhengyi Fu  <i@fuzy.me>

	Replace term-keys with kkp

	* init.el:
	* packages.el


2025-07-22  Zhengyi Fu  <i@fuzy.me>

	Add history to `elfeed-search-live-filter'

	* init.el (+elfeed-search-live-filter-with-history): New command.
	(+elfeed-search-live-filter-history): New variable.

2025-07-22  Zhengyi Fu  <i@fuzy.me>

	* init.el: Change mode of tramp-compat-temporary-file-directory to
	700.

2025-07-20  Zhengyi Fu  <i@fuzy.me>

	* init.el (elfeed-db): Fix the file watcher callback.

2025-07-20  Zhengyi Fu  <i@fuzy.me>

	* init.el: Blackout `clipetty'.

2025-07-17  Zhengyi Fu  <i@fuzy.me>

	Update gptel-config.el

	* site-lisp/gptel-config.el (gptel-read-documentation): Rename to
	`+gptel-read-documentation'.
	(+gptel-shellcheck-fix): Fix the prompt to make sure `edit_file'
	tool is used.
	; * site-lisp/gptel-config.el: Update docstring.

2025-07-17  Zhengyi Fu  <i@fuzy.me>

	* transient/values.el (gptel-menu): Remove default value.

2025-07-17  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Update description of tools.

2025-07-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (+sh-mode-h): New function.  Add to `sh-mode-hook'.
	(hack-local-variables-hook): Fix typo.

2025-07-16  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tencent-cos.el: Rename tencent-cloud to
	tencent-cos.el.

2025-07-15  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tencent-cloud.el: New file.  Add support for Tencent
	Cloud Object Storage.

2025-07-15  Zhengyi Fu  <i@fuzy.me>

	* init.el: Refactor and update comments.
	* packages.el: Remove gptel-quick.

2025-07-15  Zhengyi Fu  <i@fuzy.me>

	* init.el (auth-sources-gpg-encrypt-to): Set to a list.

2025-07-14  Zhengyi Fu  <i@fuzy.me>

	Remove configuration for browser-hist

	* init.el:

2025-07-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el (+gptel-shellcheck-fix): Refactor
	function.  Fix wrong buffer name.

2025-07-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-cmds.el: Remove file.

2025-07-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el ("Moonshot"): Add definition for
	Moonshot backend.

2025-07-11  Zhengyi Fu  <i@fuzy.me>

	Update gptel-config.el

	* site-lisp/gptel-config.el (+gptel-edit-file): Optimize the UX.
	(run_async_command): Remove.
	(+gptel-edit-buffer): New function.
	(+gptel-shellcheck-fix): New command.

2025-07-10  Zhengyi Fu  <i@fuzy.me>

	* packages.el (git-modes): Add package `git-modes'.

	* init.el (+elfeed-db-sync): Remove function.
	(eat-tramp-shells): Set shell for scp method.

2025-07-08  Zhengyi Fu  <i@fuzy.me>

	* init.el: Disable `visual-wrap-prefix-mode', because it conflicts
	with `telega-chat-mode'.

2025-07-07  Zhengyi Fu  <i@fuzy.me>

	Update configuration for svn

	* init.el (send-password-to-process): New command.
	(send-password-to-buffer-process): Remove command.
	(vc-svn-global-switches): Remove --force-interactive.

2025-07-07  Zhengyi Fu  <i@fuzy.me>

	Remove reader

	* packages.el:

2025-07-07  Zhengyi Fu  <i@fuzy.me>

	Optimize tramp performance

	* init.el (remote-direct-async-process): New connection local profile.
	(magit-tramp-pipe-stty-settings): Set to `pty'.

2025-07-07  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-db-sync): Do not use systemd-run which causes
	problems.

2025-07-07  Zhengyi Fu  <i@fuzy.me>

	* init.el (vc-svn-global-switches): Use gnome-keyring for password
	stores.

2025-07-04  Zhengyi Fu  <i@fuzy.me>

	Improve eat shell integration on remote machines

	* init.el (+eat-install-helpers): New command.
	(eat-exec): Make it connection local variables aware.
	* early-init.el (straight-use-symlinks): Set to nil.

2025-07-04  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-db-sync): Run the commands in a new session
	avoid various problems.

2025-07-03  Zhengyi Fu  <i@fuzy.me>

	* init.el (grep-mode-hook): Fix configuration for `nerd-icons-grep'.

2025-07-03  Zhengyi Fu  <i@fuzy.me>

	* init.el (eat): Set default shell when using tramp.

2025-07-03  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/pp-posframe.el (pp-posframe-display-value): Use
	`line-prefix' property instead of `display' property.

2025-07-03  Zhengyi Fu  <i@fuzy.me>

	Update gptel-config

	* site-lisp/gptel-config.el (+gptel-run-command-sandboxed): New function.
	(+gptel-forge-post-cancel): Change the messages.

2025-07-03  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Fix recipe for reader.

2025-07-01  Zhengyi Fu  <i@fuzy.me>

	* init.el:
	* packages.el: Remove bufferlo.

2025-07-01  Zhengyi Fu  <i@fuzy.me>

	* init.el (+meow-setup-indicator): New function.  Added to
	`meow-global-mode-hook'.

2025-07-01  Zhengyi Fu  <i@fuzy.me>

	* init.el (tramp-compat-temporary-file-directory): Set to
	"$XDG_RUNTIME_DIR/emacs".

2025-06-27  Zhengyi Fu  <i@fuzy.me>

	Update elfeed configuration

	* init.el (+elfeed-db-sync): Call `elfeed-db-gc'. Remove the tmp
	file before exiting.
	(elfeed-search-mode-map): Bind "q" to `elfeed-db-unload'.

2025-06-24  Zhengyi Fu  <i@fuzy.me>

	* .gitignore: Add project.eld and network-security.eld.

2025-06-23  Zhengyi Fu  <i@fuzy.me>

	Enable --autostash in `magit-pull' by default

	* transient/levels.el (magit-pull): Set level of --autostash to 1.
	* transient/values.el (magit-pull): Add --autostash by default.

2025-06-22  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-db-sync): Do not send notification on
	successful sync.

2025-06-22  Zhengyi Fu  <i@fuzy.me>

	Add elfeed-web

	* packages.el (web-server, elfeed-web): New packages.
	(straight-host-usernames): Update default usernames.

2025-06-22  Zhengyi Fu  <i@fuzy.me>

	* init.el (elfeed-db): Require filenotify.

2025-06-21  Zhengyi Fu  <i@fuzy.me>

	* init.el (elfeed-db): New function.  Reload feeds.eld on change.

2025-06-20  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-feeds-inhibit-save): Remove variable.
	(+elfeed-feeds-save): Remove function.

2025-06-20  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-browse-eww): New command.  Assigned to "e" in
	`elfeed-show-mode-map'.

2025-06-20  Zhengyi Fu  <i@fuzy.me>

	Update gptel configuration

	* site-lisp/gptel-config.el (+gptel-search-emacs-lists): New function.
	(+gptel-url-retrieve): New function.

2025-06-20  Zhengyi Fu  <i@fuzy.me>

	Minor update to gptel configuration

	* site-lisp/gptel-config.el (+gptel-edit-file): Renamed from
	`my-gptel--edit_file'.  All calls changed.
	(+gptel-review-pullreq): Add &rest _ args.
	(+gptel-review-pullreq): Add a star to the end of the buffer name.

2025-06-19  Zhengyi Fu  <i@fuzy.me>

	* init.el (elfeed-show-tag): Use `elfeed-db-get-all-tags' instead
	of the tags history as the completion table.

2025-06-19  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Kill unused buffers.
	(+gptel-request-changes): Better error handling.

2025-06-19  Zhengyi Fu  <i@fuzy.me>

	Add a command to review PRs automatically with LLM

	* site-lisp/gptel-config.el (+gptel-review-pullreq): New command.

2025-06-19  Zhengyi Fu  <i@fuzy.me>

	* init.el (elfeed-show-tag): Fix calculation of the tags
	completion tags.

2025-06-19  Zhengyi Fu  <i@fuzy.me>

	Update gptel configuration

	* site-lisp/gptel-config.el (my-gptel--edit_file): Use `when-let*'
	to avoid warnings.
	(my-gptel--edit_file): Save the buffer after user accepts the change.
	(gptel-backend):  Do not set it here.
	(+gptel-auto-scroll-safe): New function.  Added to
	`gptel-post-stream-hook'.
	* site-lisp/gptel-config.el: Add new tools: get_pullreq,
	approve_pullreq, request_changes, get_jira_issue,
	create_jira_issue, comment_jira_issue, transition_jira_issue,
	search_jira_issue.


2025-06-19  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Confirm before reading files.

2025-06-19  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/gptel-config.el: Add backend GH Copilot.

2025-06-19  Zhengyi Fu  <i@fuzy.me>

	Update gptel configuration

	* site-lisp/gptel-config.el: New file.

2025-06-18  Zhengyi Fu  <i@fuzy.me>

	Provide completion when reading elfeed tags

	* init.el (+elfeed-tag-history): New variable.
	(elfeed-show-tag): Add an advice to use `completing-read-multiple'
	to read the tags.

2025-06-18  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-db-sync): Optimise the bash command.

2025-06-18  Zhengyi Fu  <i@fuzy.me>

	Optimize elfeed db sync

	* init.el (+elfeed-db-sync): Add --no-block option.  Send
	notification on finish.
	(elfeed-db-unload-hook): Add `elfeed-db-gc-safe'.

2025-06-18  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-db-sync): Remove "--pipe" option.

2025-06-18  Zhengyi Fu  <i@fuzy.me>

	* init.el (+elfeed-db-sync): Rename the log buffer to
	" *+elfeed-db-sync*".

2025-06-18  Zhengyi Fu  <i@fuzy.me>

	Configure synchronization for elfeed

	* init.el: Load feeds.eld from `elfeed-db-directory'.
	(+elfeed-feeds-inhibit-save): New variable.
	(+elfeed-feeds-save): New function.  Called when `elfeed-feeds'	is changed.
	(+elfeed-db-sync): New function.  Synchronize the git repo for
	elfeed database. Called after `elfeed-db-gc'.

2025-06-18  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/vi-modeline.el (vi-modeline-apply): Prevent stack overflow.

2025-06-17  Zhengyi Fu  <i@fuzy.me>

	Update secrets.el

	* site-lisp/secrets.el (secrets-open-session-functions): New variable
	(secrets-session-algorithm): Change to generic object.
	(secrets-session-aes-key): Remove variable.
	(secrets-algorithm-encrypt, secrets-algorithm-decrypt): New method.
	(secrets-open-session-plain)
	(secrets-open-session-dh-ietf1024-sha256-aes128-cbc-pkcs7): New functions.
	(secrets-open-session): Use `secrets-open-session-functions'.
	(secrets-close-session): Reset `secrets-session-algorithm'.
	(secrets-create-item): Use `secrets-algorithm-encrypt'.
	(secrets-get-secret): Use `secrets-algorithm-decrypt'.

2025-06-17  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Remove copilot-chat.

2025-06-17  Zhengyi Fu  <i@fuzy.me>

	Add `elfeed'

	* init.el (mode-specific-map): Bind E to `elfeed'.
	* packages.el (elfeed):

2025-06-17  Zhengyi Fu  <i@fuzy.me>

	* transient/values.el (gptel-menu): Add --prune --tags to
	`magit-fetch'.

2025-06-16  Zhengyi Fu  <i@fuzy.me>

	* init.el: Force shorter `tramp-compat-temporary-file-directory' value.

2025-06-16  Zhengyi Fu  <i@fuzy.me>

	Update secrets.el

	* site-lisp/secrets.el (secrets-unibyte-string-to-integer): Fix typo.
	(secrets-random, secrets-generate-priv-key)
	(secrets-priv-key-to-pub-key): New function.
	(secrets-generate-key-pair): Remove function.
	(secrets-compute-aes-key, secrets-open-session): Use the new
	functions.

2025-06-16  Zhengyi Fu  <i@fuzy.me>

	* init.el (vc-svn-global-switches): Only use kwallet for password-store.

2025-06-15  Zhengyi Fu  <i@fuzy.me>

	Fix problem on Fedora

	* packages.el (reader): Do not use pkg-config module for libmupdf,
	which doesn't exist on Fedora.

2025-06-15  Zhengyi Fu  <i@fuzy.me>

	Fix compatibility problem

	* init.el: Don't use quit-window-kill-buffer if not bound.

2025-06-15  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/secrets.el: New file.  A modified copy of secrets.el
	that supports encrypted transfer of secrets.

2025-06-13  Zhengyi Fu  <i@fuzy.me>

	Some minor changes

	* init.el (grep-use-headings): Set to t.
	(mode-line-buffer-identification): Set the default value to show
	nerd-icons before buffer name.
	(frame-auto-hide-function): Default to delete frames.
	(quit-window-kill-buffer): Delete magit-diff, magit-revision and
	xref buffers on quit.
	(tramp-compat-temporary-file-directory): Ensure the paths of the
	files in `tramp-compat-temporary-file-directory' not exceed the
	limit of unix domain socket path.
	(vc-svn-global-switches): Add options to use kwallet for password
	store.

2025-06-05  Zhengyi Fu  <i@fuzy.me>

	* packages.el: New package `reader'.

2025-06-05  Zhengyi Fu  <i@fuzy.me>

	Do not force `compilation-mode` to use pipes

	* init.el (+process-use-pipe): Remove function.

2025-06-05  Zhengyi Fu  <i@fuzy.me>

	* rnc-schemas/busconfig.rnc: New file.

2025-05-20  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/consult-ugrep.el (consult--ugrep-make-builder):
	Correctly handle -j flag.  -S is not short for --smart-case.

2025-05-20  Zhengyi Fu  <i@fuzy.me>

	Add forge

	* packages.el:
	* init.el:

2025-05-20  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el: Fix warnings.

2025-05-20  Zhengyi Fu  <i@fuzy.me>

	Remove `popper'

	* packages.el:
	* init.el:

2025-05-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (file-map): Replace `recentf-open' with
	`consult-recent-file'.

2025-05-17  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/eshell-extras.el (eshell/rg): Do not allow use of
	`occur'.

2025-05-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (meow-setup): Do not set `meow-mode-state-list'.

2025-05-16  Zhengyi Fu  <i@fuzy.me>

	* init.el <eshell>: Update `eshell-visual-commands' and
	`eshell-visual-subcommands'.

2025-05-15  Zhengyi Fu  <i@fuzy.me>

	* init.el <eglot>: Bind C-x x / to `eglot-format' in `eglot-mode-map'.

2025-05-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui--kill-callback): Delay 4 seconds and
	send SIGKILL to the process.

2025-05-14  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/consult-kill.el (consult-kill): Delay 4 seconds and
	send SIGKILL to the process.

2025-05-14  Zhengyi Fu  <i@fuzy.me>

	Add `bufferlo'

	* packages.el:
	* init.el: Add bufferlo configuration.
	(+autoload-recursively): New function.
	(+bufferlo-consult--source-local-buffers)
	(+bufferlo-consult--source-other-buffers)
	(+bufferlo-consult--source-all-buffers): New variables.  Added to
	`consult-buffer-sources'.
	(+bufferlo-prefix-map): New keymap.  Bind to C-c z.


2025-05-14  Zhengyi Fu  <i@fuzy.me>

	Remove activities.el

	* packages.el:
	* init.el: Remove configuration for activities.el.

2025-05-14  Zhengyi Fu  <i@fuzy.me>

	* init.el (add-change-log-entry): Start a new changelog record if
	the changelog is not already modified.

2025-05-14  Zhengyi Fu  <i@fuzy.me>

	Remove exwm.el

	* site-lisp/exde.el: Remove file.
	* packages.el: Remove packages needed by exwm.el.
	* init.el (+consult-firefox-filter, +consult-source-firefox): Remove variables.
	(+exwm--command-line-handler): Remove function.

2025-05-14  Zhengyi Fu  <i@fuzy.me>

	* init.el (completing-read-multiple): Only define this advice when
	emacs-version < 31.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	* init.el: Fix usage of `blackout'.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	* init.el (meow-replace-state-name-list): Customize meow state indicators.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	Add `nerd-icons-grep'

	* packages.el (nerd-icons-grep): Add package `nerd-icons-grep'.
	* init.el: Load it when `grep' is loaded.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	* init.el (+embark-consult-export-grep--headings): Remove function.
	grep heading is directly supported by consult now.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	Prefer `visual-fill-column-mode' over `olivetti-mode' and
	`visual-line-fill-column-mode'

	* init.el (+visual-fill-column/toggle-visual-fill-and-center): Use
	`visual-fill-column-mode' instead of `visual-line-fill-column-mode'.
	(org-mode-map): Remove local keybinding for `olivetti-mode'.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	* init.el <consult>: Bind M-s D to `consult-fd', M-s R to `consult-ugrep'.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	* init.el (auto-mode-alist): Use `makefile-mode' to visit qmake
	files.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	Remove doom-modeline

	* packages.el (blackout): Add package.
	(doom-modeline): Remove package.

	* init.el: Remove configuration for `doom-modeline'.
	Remove some minor mode lighters using `blackout'.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	* init.el (add-change-log-entry): Temporarily bind
	`add-log-always-start-new-record' to t if WHOMAI is non-nil.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/consult-ugrep.el (consult-ugrep-args): Add
	--ignore-files to standard value of `consult-ugrep-args'.

2025-05-13  Zhengyi Fu  <i@fuzy.me>

	Remove password-store

	* obsoletes.el: New file for removed parts.

	* packages.el (pass): Remove package.

	* init.el (eat-send-pass): Remove function.
	(password-store): Remove package configuration.

2025-05-12  Zhengyi Fu  <i@fuzy.me>

	* templates/cc-mode.eld: Add new snippet `pheader'.

2025-05-12  Zhengyi Fu  <i@fuzy.me>

	* early-init.el (confirm-kill-emacs): Do not require confirmation
	on exit.

2025-05-12  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/cmake-capf.el (cmake-capf--candidates): Use
	`with-temp-buffer' instead of `with-work-buffer'.

2025-05-09  Zhengyi Fu  <i@fuzy.me>

	* init.el (auto-mode-alist): Fix entry for `c++-mode'.

2025-05-09  Zhengyi Fu  <i@fuzy.me>

	* init.el (tool-map): Bind "R" to `tui-recentf' and "G" to
	`tui-git-ls-files'.

2025-05-09  Zhengyi Fu  <i@fuzy.me>

	* init.el (udev-rules-mode): New command.

2025-05-09  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui--kill-callback): Fix the regexp.

2025-05-09  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/fuzzy-finder.el (fuzzy-finder-fzf): Fix syntax error.

2025-05-08  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui--grep-preview, tui--file-preview): New
	variables.

2025-05-08  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/tui/tui.el (tui-recentf): Save recentf list.

	* init.el (auto-mode-alist): Treat .ipp and .tpp files as c++.
	(file-map): Bind "f" to `find-file'.
	(mode-specific-map): Bind "s" to `save-buffer'.
	Bind "r" to `deadgrep'.

	Improve tui and fuzzy-finder

	* site-lisp/tui/tui.el (tui-external-terminal-exec): Redirect
	output to a temp file.
	(tui-kill): Add header line.  Add preview.
	(tui-recentf): New command.
	* site-lisp/tui/fuzzy-finder.el (fuzzy-finder):
	(fuzzy-finder-build): New slot `layout'.
	(fuzzy-finder-fzf): Do not default to --preview-window noborder


2025-04-30  Zhengyi Fu  <i@fuzy.me>

	* init.el <eglot>: Do not specify clangd query-drivers.  Clang
	builtin headers should be preferred.

2025-04-24  Zhengyi Fu  <i@fuzy.me>

	Minor fixes

	* init.el (completion-cycle-threshold): Set to nil.
	* init.el (cmake-mode-hook, cmake-ts-mode-hook): Add `cmake-capf-setup'.
	* init.el <eglot>: Add /usr/bin/cc and /usr/bin/c++ to clangd query-drivers.

2025-04-21  Zhengyi Fu  <i@fuzy.me>

	Enable `pdf-view-mode' by default

	* init.el: Use `pdf-view-mode' by default.
	(pdf-view-mode): Autoload this function.

2025-04-16  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/dotemacs-core.el (enable-minor-mode-in-project): Try
	loading the minor mode if input doesn't match any candidates from
	the completion table.

2025-04-15  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add package `go-mode'.

2025-04-08  Zhengyi Fu  <i@fuzy.me>

	Add package `paredit'

	* init.el <paredit>: Enable `paredit-mode' in `lisp-data-mode' and
	`scheme-mode'.  Unbind M-s in `paredit-mode-map'.  Bind M-p to
	`paredit-splice-sexp'.

	* packages.el: Add package `paredit'.

2025-04-08  Zhengyi Fu  <i@fuzy.me>

	Remove `puni'

	* packages.el:
	* init.el: Remove `puni' configuration.

2025-04-07  Zhengyi Fu  <i@fuzy.me>

	* init.el (+repeat--post-command): Fixed the error where
	`this-command` is not a symbol.

2025-04-07  Zhengyi Fu  <i@fuzy.me>

	* init.el (meow-setup): Bind "q" to `quit-window'.

2025-04-07  Zhengyi Fu  <i@fuzy.me>

	Add keybinding for `flymake-mode'

	* init.el (toggle-map): Bind "f" to `flymake-mode'.
	Bind "q" to `display-fill-column-indicator-mode'.

2025-04-07  Zhengyi Fu  <i@fuzy.me>

	Better window scrolling after xref jump and return

	* init.el (+recenter-bottom-30%): New function.  Added to
	`xref-after-return-hook'.
	<xref>: Remove `recenter' from `xref-after-jump-hook'.

2025-04-07  Zhengyi Fu  <i@fuzy.me>

	Improve flymake configurations

	* init.el (+nxml-mode--flymake, +cc-mode--hook): Fix typo
	(`flymake-diagnostic-functions').
	(flymake-systemd): Autoload this function.
	(+systemd-mode--setup): New function.  Added to `systemd-mode-hook'.

2025-04-06  Zhengyi Fu  <i@fuzy.me>

	Update `diff-hl' state after committing with vc-dwim

	* init.el <diff-hl>: Add `diff-hl-update' to
	`vc-dwim-post-commit-hook'.

2025-04-04  Zhengyi Fu  <i@fuzy.me>

	* init.el (meow-setup): Fix key binding for `meow-universal-argument'.

2025-04-04  Zhengyi Fu  <i@fuzy.me>

	* init.el (straight-magit-package-status): Fix `interactive' form.

2025-04-03  Zhengyi Fu  <i@fuzy.me>

	* init.el (send-password-to-buffer-process): New command.

2025-04-03  Zhengyi Fu  <i@fuzy.me>

	* init.el <eglot>: Add --query-driver= arguments to clangd.

2025-04-03  Zhengyi Fu  <i@fuzy.me>

	* init.el (buffer-list-update-hook): Add `recentf-track-opened-file'.

2025-04-03  Zhengyi Fu  <i@fuzy.me>

	* init.el <eglot>: Bind "C-c C-a" to `eglot-code-actions'.

2025-04-01  Zhengyi Fu  <i@fuzy.me>

	Remove command `+citre-enable'

	* init.el (+citre--get-major-modes-for-citre): Remove function.
	(+citre-enable): Remove command.  Use
	`enable-minor-mode-in-project' instead.

2025-04-01  Zhengyi Fu  <i@fuzy.me>

	Remove command `prism-project'

	* init.el (prism-project): Remove commmand.  Use
	`enable-minor-mode-in-project' instead.
	(prism-project-mode-history): Remove variable.

2025-04-01  Zhengyi Fu  <i@fuzy.me>

	* init.el (meow-setup): Bind "`" to `meow-universal-argument'.

2025-04-01  Zhengyi Fu  <i@fuzy.me>

	Improve `enable-minor-mode-in-project'

	* site-lisp/dotemacs-core.el (dotemacs--project-hook-function):
	Use args.  Add docstring.
	(project-add-hook!): Add docstring to the hook function.
	(project-remove-hook!): Add docstring.  Add default value for
	PROJECT.

2025-03-31  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/dotemacs-core.el (project-remove-hook!): Remove empty hooks.

2025-03-31  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/dotemacs-core.el (project-remove-hook!): New command.

2025-03-31  Zhengyi Fu  <i@fuzy.me>

	* init.el <git-commit>: Hide log-edit files buffer after commit.

2025-03-31  Zhengyi Fu  <i@fuzy.me>

	Add new command `enable-minor-mode-in-project'

	* site-lisp/dotemacs-core.el
	(dotemacs--project-hook-function, project-add-hook!): Allow
	multiple functions to be added to a single hook.
	(emmip--minor-mode-history, emmip--major-modes-history): New variables.
	(dotemacs--major-mode-completion-table): New function.
	(enable-minor-mode-in-project): New command.

2025-03-31  Zhengyi Fu  <i@fuzy.me>

	Fix the incorrect buffer modified flag state

	* init.el <git-commit>: Do not overwrite standard-value of
	`git-commit-setup-hook'.
	(+git-commit--log-edit-h): Save the log buffer.

2025-03-31  Zhengyi Fu  <i@fuzy.me>

	* init.el <xref>: Avoid overwrite standard values for
	`xref-after-jump-hook' and `xref-after-return-hook'.

2025-03-31  Zhengyi Fu  <i@fuzy.me>

	* templates/cc-mode.eld: Add snippets for writing tevent
	asynchronous operations.

2025-03-26  Zhengyi Fu  <i@fuzy.me>

	Improve Log-Edit support for Git-Commit mode

	* init.el (+git-commit--log-edit-h): Do not call `log-edit'.
	Directly set params and run `log-edit-hook'.

2025-03-26  Zhengyi Fu  <i@fuzy.me>

	* init.el: Remove names of keymaps.

2025-03-25  Zhengyi Fu  <i@fuzy.me>

	* init.el (+prism--set-colors): Wrap `modus-themes-with-colors'
	and `ef-themes-with-colors' in eval forms.

2025-03-24  Zhengyi Fu  <i@fuzy.me>

	* init.el (prism-project): Better predicate and default values.

2025-03-24  Zhengyi Fu  <i@fuzy.me>

	Add command for enabling `prism-mode' in projects

	* init.el (prism-project): New command.
	(prism-project-mode-history): New variable.

2025-03-23  Zhengyi Fu  <i@fuzy.me>

	* packages.el: Add package AUCTeX.

2025-03-23  Zhengyi Fu  <i@fuzy.me>

	Set `file-name-handler-alist' to nil during startup

	* init.el (+saved-file-name-handler-alist): New variable.  Save
	value for `file-name-handler-alist' during startup.

2025-03-23  Zhengyi Fu  <i@fuzy.me>

	Implement a project-specific hook mechanism

	* init.el (+citre--enable): Removed function.
	(+citre--managed-hook, +citre--enable): Removed variables.
	(+citre-enable): Use `project-add-hook!'.

	* site-lisp/dotemacs-core.el (dotemacs--project-hook-function)
	(project-add-hook!): New functions.
	(dotemacs--project-hooks): New variable.

2025-03-21  Zhengyi Fu  <i@fuzy.me>

	Manage citre-mode like eglot

	* init.el: Removed `citre-auto-enable-citre-mode' from `find-file-hook'.
	Do not turn on `citre-mode' automatically.
	(+citre--managed-project-modes, +citre--managed-hook): New variables.
	(+citre--enable, +citre--get-major-modes-for-citre): New functions.
	(+citre-enable): New command.

2025-03-21  Zhengyi Fu  <i@fuzy.me>

	* init.el <consult-eglot>: Remap `xref-find-apropos' to
	`consult-eglot-symbols' in `eglot-mode-map'.

2025-03-21  Zhengyi Fu  <i@fuzy.me>

	* init.el (+prism--set-colors): Blend string colors with the
	foreground color instead of white.

2025-03-21  Zhengyi Fu  <i@fuzy.me>

	Rename `consult-eglot--async-wrap' to `+consult--async-wrap--split-space'

	* init.el (+consult--async-wrap--split-space): Renamed from
	`consult-eglot--async-wrap'.  The only caller is changed.

2025-03-21  Zhengyi Fu  <i@fuzy.me>

	Add package `prism'

	* packages.el (prism): Add package.

	* init.el: Add `prism-mode' to `eglot-managed-mode-hook'.
	(+prism--set-colors): New function.  Call it after loading prism.
	(+prism--enable-theme-f): New function.  Added to `enable-theme-functions'.

2025-03-19  Zhengyi Fu  <i@fuzy.me>

	* init.el (+citre/remove-tags-file): New command.

2025-03-19  Zhengyi Fu  <i@fuzy.me>

	Add a hook that is run after vc-dwim --commit succeeds

	* init.el (vc-dwim-post-commit-hook): New variable. Add
	`vc-refresh-state' and `magit-refresh'.
	(add-log/vc-dwim-commit): Run `vc-dwim-post-commit-hook' if
	success.

2025-03-19  Zhengyi Fu  <i@fuzy.me>

	Scroll the window so that current line is at top 30% after jumping

	* init.el (+recenter-top-30%): New function.
	(consult-after-jump-hook, xref-after-jump-hook)
	(xref-after-return-hook): Add it and remove `recenter'.

2025-03-18  Zhengyi Fu  <i@fuzy.me>

	* init.el (add-log/vc-dwim-commit): Signal a user-error if vc-dwim
	exits with non-zero values.

2025-03-18  Zhengyi Fu  <i@fuzy.me>

	Add convenient command for vc-dwim

	* init.el (add-log/vc-dwim-commit): New command.
	Bind "C-c RET" to this command in `change-log-mode-map'.

2025-03-18  Zhengyi Fu  <i@fuzy.me>

	Autoload should not contain .elc? suffixes

	* templates/emacs-lisp.eld <autoloadf>: Remove suffixe from the
	file name.

2025-03-18  Zhengyi Fu  <i@fuzy.me>

	Recenter after jumping through Xref

	* init.el (xref-after-return-hook, xref-after-jump-hook): Add
	recenter.

2025-03-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (consult-eglot-symbols): Bind M-s M-s and M-s s to
	`consult-eglot-symbols'.

2025-03-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (auto-mode-alist): Open .clangd and .clang-format files
	with YAML mode.

2025-03-17  Zhengyi Fu  <i@fuzy.me>

	Allow autoload to load byte-compiled Lisp files

	* init.el:
	* site-lisp/persp-mode-config.el:
	* site-lisp/tui/tui.el: Remove .el suffix from the second
	arguments of `autoload'.

2025-03-17  Zhengyi Fu  <i@fuzy.me>

	* init.el (corfu--minibuffer-on): Autoload this function and add
	it to `minibuffer-setup-hook'.

2025-03-14  Zhengyi Fu <i@fuzy.me>

	Do not enable Eat integration for Eshell on Windows

	* init.el <eat>: Do not enable `eat-eshell-mode' and
	`eat-eshell-visual-command-mode' on windows.

2025-03-14  Zhengyi Fu  <i@fuzy.me>

	Setup `log-edit' for `git-commit-mode'

	* init.el (+git-commit--log-edit-h): New function.  Added to
	`git-commit-setup-hook'.

2025-03-14  Zhengyi Fu  <i@fuzy.me>

	* init.el: Load gnus-diff after gnus-art.

2025-03-14  Zhengyi Fu  <i@fuzy.me>

	Add package `repeat-fu'

	* init.el (+repeat-fu--meow-mode-h): New function.  Added to
	`meow-mode-hook'.
	(repeat-fu-mode-map): New variable.  Bind C-' to
	`repeat-fu-execute'.
	(rpeat-fu-preset): Set to `meow'.
	(meow-normal-state-keymap): Bind " to `repeat-fu-execute'.

2025-03-14  Zhengyi Fu  <i@fuzy.me>

	Do not lock scratch buffers any more.  Because it causes more trouble
	than benefits.
	* init.el (get-scratch-buffer-create): Remove function.

	* init.el (git-commit-major-mode): Set to `log-edit-mode'.

	* init.el (+eshell/here, +eat/here): Commands removed.
	(tool-map) <"e", "s">: Bind to `eshell' and `eat' instead.

	* init.el (p-search): Fix loading of psx-info.

	* init.el (+custom-fonts-alist, +custom-fontset): Switch back to
	Iosevka SS04.  Inconsolata doesn't work well without cairo.

2025-03-12  Zhengyi Fu  <i@fuzy.me>

	Do not enable gpg sign by default

	* transient/values.el (magit-am, magit-cherry-pick, magit-commit)
	(magit-merge, magit-rebase): Remove values for these prefixes.

2025-03-12  Zhengyi Fu  <i@fuzy.me>

	Move persp-mode configuration to a separate file

	* init.el: Remove persp-mode configuration.
	* packages.el: Remove persp-mode.
	* site-lisp/persp-mode-config.el: New file.

2025-03-12  Zhengyi Fu  <i@fuzy.me>

	* init.el (+vc/dir-here): Use vc-responsible-backend.
	(+project/vc-diff): Use project-vc and vc-responsible-backend to get
	the backend.

2025-03-11  Zhengyi Fu  <i@fuzy.me>

	* init.el: Add +activities--fix-consult--source-buffer to tab-bar-tab-post-open-functions

	* init.el (+project/vc-diff): New command.

2025-03-10  Zhengyi Fu  <i@fuzy.me>

	Replace home-grown ctags with citre

	* site-lisp/gtags.el:
	* site-lisp/ctags-xref.el:
	* site-lisp/ctags-xref-c.el:
	* site-lisp/ctags-menu.el:
	* site-lisp/ctags-core.el:
	* site-lisp/ctags-capf.el: Removed files.
	* init.el: Remove ctags configurations.  Add citre configurations.
	* packages.el: Add citre.

2025-03-07  Zhengyi Fu  <i@fuzy.me>

	Workaround gptel transient problem by disabling compilation

	* packages.el (gptel): Disable compilation of gptel.  Transient stores
	histories in the history.el file.  If compilation is enabled, the
	stored object is not readable.

2025-03-07  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/activities-persist-buffers.el (activities-persist-buffers):
	New group.

	* init.el (activities-kill-buffers):  Set to t.

2025-03-07  Zhengyi Fu  <i@fuzy.me>

	Quit xrefs window when not using it

	* init.el (+xref-window-quit): New function. Quit the xrefs window.
	(+xref--show-definition): Call it.

2025-03-07  Zhengyi Fu  <i@fuzy.me>

	Improve ctags-xref-c

	* site-lisp/ctags-xref-c.el (ctags-xref-c--filter): Handle
	enumerators.
	Increase scores of local variables where the scope matches.

2025-03-07  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/activities-persist-buffers.el: Fix typos.

	* init.el (gptel-default-mode): Set to markdown-mode

2025-03-07  Zhengyi Fu  <i@fuzy.me>

	Refactor activities-persist-buffers

	* site-lisp/activities-persist-buffers.el (activities-persist-buffers-ant-save-predicates):
	New variable.
	* site-lisp/activities-persist-buffers.el (activities-persist-buffers--error-buffer-p):
	(activities-persist-buffers--backtrace-p):
	(activities-persist-buffers-ant-save-predicates): New function.
	(activities-persist-buffers-activity-state): Renamed from
	activities-activity-state-with-buffers.
	(activities-persist-buffers--save-activity-buffers): Renamed from
	+activities-state--with-buffers.
	(activities-persist-buffers--restore-buffers):
	Renamed from +activities--restore-buffers.
	(activities-persist-buffers--restore-activity-buffers): Renamed from
	+activities--restore-activity-buffers.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	Improve telega bookmark implementation

	* site-lisp/bookmark-extras.el (telega-root-bookmark-handler):
	Explicitly set the telega root buffer as the current buffer.
	* site-lisp/bookmark-extras.el (telega-chat-bookmark-make-record):
	Use chat-id instead of the chat plist.
	(telega-chat-bookmark-handler): Optimise.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	Add bookmark support for telega

	* site-lisp/bookmark-extras.el (telega-root-bookmark-make-record):
	(telega-root-bookmark-handler):
	(telega-root-bookmark-enable):
	(telega-chat-bookmark-make-record):
	(telega-chat-bookmark-handler):
	(telega-chat-bookmark-enable):
	(telega-bookmark-install):
	(bookmark-extras-install): New functions.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	Improve consult integration of activities

	* init.el (+activities-tab-buffer-source): Remove the current buffer.
	Use consult--buffer-pair as conversion function.
	(+activities--fix-consult--source-buffer): Renamed from
	+activities-tabs-mode-h.  Added to activities-after-switch-functions
	and activities-after-resume-functions.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	* init.el (activities): Enable bookmark-extras.

	* site-lisp/bookmark-extras.el (bookmark-extras-install): New
	function.  Install bookmark supports explicitly.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	bookmark-extras: add support for eat

	* site-lisp/bookmark-extras.el (eat-bookmark-make-record):
	(eat-bookmark-handler):
	(eat-bookmark-enable): New functions.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	Make buffers visible when not in any activity

	* init.el (+activities-tabs-mode-h): Simplify code.  Add to
	tab-bar-tab-post-select-functions.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	* init.el: call +activities-tabs-mode-h after loading consult

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	Activities-Persist-Buffers-Mode

	* site-lisp/activities-persist-buffers.el: New file. Add new global
	minor mode activities-persist-buffers-mode.
	* init.el (activities): Activate it on load of activities.el.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	Consult-buffer integration for activities-tabs-mode

	* init.el (+activities-tab-buffer-source): New consult buffer source.
	(+activities-tabs-mode-h): Turn on/off consult--source-buffer.
	(activities-tabs-mode-hook): Add it to activities-tabs-mode-hook.

2025-03-06  Zhengyi Fu  <i@fuzy.me>

	Update magit configuration

	* init.el (activities-prefix-map): Add documentation.
	(magit): Change default level of magit:--signoff to 1.
	* transient/levels.el: Set level of magit-commit to 5.
	* transient/values.el: Save magit-log arguments, including
	--show-signature.

2025-03-05  Zhengyi Fu  <i@fuzy.me>

	Add `activities'

	* init.el (activities): Enable `activities-mode' and `activities-tabs-mode' on load.
	(activities-prefix-map): Define a prefix keymap for `activities'.
	("C-x C-a"): Bind to it.
	* packages.el (persp-mode): Install `activities'.

2025-03-05  Zhengyi Fu  <i@fuzy.me>

	* init.el: Disable loading of persp-mode

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Update magit gpg sign options

	* transient/levels.el: Removed.
	* init.el (magit): Set default level of magit:--gpg-sign to 1.
	Set magit-openpgp-default-signing-key.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Add --gpg-sign to more prefix

	* transient/levels.el:
	* transient/values.el: Add --gpg-sign to more prefix.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	* site-lisp/ctags-xref-c.el (ctags-xref-c--filter):
	Handle constructors.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Add --gpg-sign to more prefix

	* transient/values.el:
	* transient/levels.el: Add --gpg-sign to more prefix.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	* init.el (persp-key-map): Change key binding of
	+persp/project-to-persp to "O" to avoid conflict

	* site-lisp/ctags-core.el (ctags-universal-ctags-program): Try ctags
	in ctags-universal is not found.

	* transient/values.el: Add --kinds-all=* to ctags-menu arguments.

	* init.el: Fix persp-common-buffer-filter-functions.

	* site-lisp/ctags-xref-c.el (ctags-xref-c--filter):  Increase score
	for typedefs.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Update transient config

	* transient/levels.el: New file.  Modify default levels for some magit
	commit commands.
	* transient/values.el (gptel-menu): Add --gpg-sign= option.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	* init.el: Fixed save and load of magit buffers.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Improve perspective configuration

	* init.el (persp-add-buffer-on-after-change-major-mode): Set to t.
	(persp-common-buffer-filter-functions): Add function to filter out
	magit-process-mode buffers.

	* init.el (+persp/project-to-persp):
	(+persp/add-project): Use persp-after-change-major-mode-h to add
	buffers to perspectives.

	* init.el: Fix save and load of magit-status-mode buffers.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Move project integration for persp-mode

	* init.el (+persp/project-to-persp): Open dired in newly created
	persp.
	(+persp/switch-project-and-persp): New command.
	(persp-key-map): Add keybindings for new commands.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Project integration for persp-mode

	* init.el (+persp/project-to-persp):
	(+persp/add-project):
	(+persp/remove-project):
	(+persp/shrink-to-project): New commands.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Remove buffer-terminator as it deletes buffers from perspectives

	* init.el: Remove configuration of buffer-terminator.
	(+buffer-terminator-load): Removed.
	(+buffer-terminator-load-timer): Removed.

2025-03-04  Zhengyi Fu  <i@fuzy.me>

	Use olivetti-mode instead of visual-line-fill-column-mode in org-mode buffers

	* init.el (gptel-mode-hook): Remove visual-line-fill-column-mode.
	Add olivetti-mode.
	(+gptel-mode-h): Remove assignment of visual-fill-column-center-text.
	(org-mode-map):  Bind "C-c o c" to olivetti-mode.

2025-03-03  Zhengyi Fu  <i@fuzy.me>

	* packages.el (consult-eglot): Switch back to upstream version.

2025-03-03  Zhengyi Fu  <i@fuzy.me>

	Remove discourse

	* init.el (discourse-topic-mode-hook):
	(discourse-login):
	(discourse):
	(doc-map): Removed.
	* packages.el (straight-built-in-pseudo-packages): Remove image.
	(discourse): Removed.

2025-03-03  Zhengyi Fu  <i@fuzy.me>

	Ibuffer group by perspectives

	* init.el (+persp-mode--setup-ibuffer-filter-groups): New function.

2025-03-03  Zhengyi Fu  <i@fuzy.me>

	Install persp-mode

	* init.el (wg-morph-on): Set to nil.
	(persp-autokill-buffer-on-remove): Set to kill-weak.
	(window-setup-hook): Enable persp-mode.
	(persp-keymap-prefix): Set to C-c M-p.
	* init.el: Add persp support for eshell, compilation and magit.
	* init.el: Add persp support for ibuffer.
	* init.el: Add persp support for consult.
	* packages.el: Add persp-mode.

2025-03-03  Zhengyi Fu  <i@fuzy.me>

	Move customization of fonts to +custom-faces

	* init.el (+custom-fontset): Set :family for default and italic face
	(+custom-faces): Call +custom-fontset

2025-03-03  Zhengyi Fu  <i@fuzy.me>

	Revert "* init.el (uptime-notify): Call notify-send to send to notification."

	This reverts commit 70c2be361b8bdcea89b542366ffbfa887b42cd13.

2025-02-27  Zhengyi Fu  <i@fuzy.me>

	* init.el: Add .pc to project-vc-ignores

	* init.el (uptime-notify): Call notify-send to send to notification.

2025-02-26  Zhengyi Fu  <i@fuzy.me>

	Use Inconsolata as default font

	* init.el (+custom-fonts-alist): Use Inconsolata for latin.
	(default): Set :family to Inconsolata.
	(italic): Set :family to Iosevka SS04.

2025-02-26  Zhengyi Fu  <i@fuzy.me>

	* init.el (auth-sources): Set auth-source-gpg-encrypt-to.
	  Set auth-source-save-behavior to t.
	* (epg-pinentry-mode): Unset this variable.

2025-02-26  Zhengyi Fu  <i@fuzy.me>

	Do not use auth-source-pass anymore.

	* init.el (auth-source): Remove password-store.

2025-02-26  Zhengyi Fu  <i@fuzy.me>

	Fix line ending issues in sftp.

	* site-lisp/sftp.el (sftp--password-function): strip ^M from the input.

2025-02-26  Zhengyi Fu  <i@fuzy.me>

	* init.el (elisp-mode): Use trusted-content instead of trusted-contents.

2025-02-25  Zhengyi Fu  <i@fuzy.me>

	Add new major mode: xiaoshuo-mode

	* site-lisp/xiaoshuo.el: New file.

This file records repository revisions from
commit 01a16e7e4b30471bebf4d5c746ef8040a825e15c (exclusive) to
commit 8a1b649129183c2b889cc4496b85f6be5a963831 (inclusive).
